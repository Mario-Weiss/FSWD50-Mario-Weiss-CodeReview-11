var bg_images=["bg1.jpg","bg2.jpg","bg3.jpg","bg4.jpg","bg5.jpg","bg6.jpg","bg7.jpg","bg8.jpg","bg9.jpg","bg10.jpg","bg11.jpg"],images=[],x=bg_images.length;for(let e=0;e<x;++e)images[e]=new Image,images[e].src="img/"+bg_images[e];function fadeImage(e){e>=x&&(e=0),document.getElementById("header").style.background="url(img/"+bg_images[e]+") no-repeat center center",document.getElementById("header").style.backgroundSize="cover",setTimeout(function(){fadeImage(e+1)},8e3)}fadeImage(0);var view="all",orderby="",table="",search="";function render(){$.ajax({url:"actions/a_read.php",method:"post",data:{render:1,table:view,orderby:orderby,search:search},dataType:"text",success:function(e){$("#Locations").html(e)}})}function edit(e,t){showLocation(e),$("#formdata").trigger("reset"),$("#formTitle").html("Update location"),$("#btn-submit").html("Save changes"),$("#btn-submit").attr("onclick","update()"),$("#table").hide(),document.getElementById(e).checked=!0,$.ajax({url:"actions/a_read.php",method:"post",data:{edit:1,table:e,id:t},dataType:"text",success:function(t){t=$.parseJSON(t),$("#id").val(t.id),$("#name").val(t.name),$("#adress").val(t.adress),$("#zip").val(t.zip),$("#city").val(t.city),$("#country").val(t.country),$("#image").val(t.image),$("#type").val(t.type),$("#short_desc").val(t.short_desc),$("#web").val(t.web),$("#table").val(t.table),"restaurant"==e&&$("#phone").val(t.phone),"event"==e&&($("#datetime").val(t.datetime.replace(" ","T")),$("#price").val(t.price))}})}function update(){var e=$("#formdata").serializeArray();$.ajax({url:"actions/a_update.php",method:"post",data:e,dataType:"text",success:function(e){render()}})}function createNew(){showLocation("poi"),$("#formdata").trigger("reset"),$("#btn-submit").html("Create new"),$("#formTitle").html("Create new location"),$("#btn-submit").attr("onclick","create()"),$("#table").show()}function create(){var e=$("#formdata").serializeArray();$.ajax({url:"actions/a_create.php",method:"post",data:e,dataType:"text",success:function(e){render()}})}function deleteIt(e,t){swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data!",icon:"warning",buttons:!0,dangerMode:!0}).then(a=>{a?$.ajax({url:"actions/a_delete.php",method:"post",data:{table:e,id:t},dataType:"text",success:function(e){render()}}):swal("Your data is safe!")})}function details(e,t){showLocation(e),$.ajax({url:"actions/a_read.php",method:"post",data:{details:1,table:e,id:t},dataType:"text",success:function(t){t=$.parseJSON(t),$("#detailsTitle").html(t.name),$("#details_name").html(t.name),$("#details_adress").html(t.adress+", "+t.zip+" "+t.city+" - "+t.country+" <a href='https://www.google.com/maps/place/"+t.zip+" "+t.city+", "+t.adress+"' title='show location on google maps'><i class='fas fa-map-marker-alt'></i></a>"),$("#details_image").attr("src","img/"+t.image),$("#details_type").html(t.type),$("#details_short_desc").html(unescape(t.short_desc)),$("#details_web").html('<a href="'+t.web+'">'+t.web+"</a>"),"poi"==e&&(t.table="Point of Interest"),"restaurant"==e&&(t.table="Restaurant",$("#details_phone").html(t.phone)),"event"==e&&(t.table="Event",$("#details_datetime").html(t.datetime),$("#details_price").html("&euro; "+Number(t.price).toFixed(2))),$("#details_table").html(t.table)}})}function showLocation(e){$(".location").hide(),$("."+e).show()}function changeView(e){view=e,render()}function sort(e){orderby="ORDER BY "+e,render()}function like(e,t,a){$.ajax({url:"actions/a_like.php",method:"post",data:{check:1,table:e,id:t,user:a},dataType:"text",success:function(e){"true"==e?swal("You already like this!","","info"):render()}})}$("input[name=table]").change(function(){showLocation($("input[name=table]:checked").val())}),$("#search_text").keyup(function(){search=$(this).val(),render()}),render();